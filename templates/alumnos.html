{% extends 'base.html' %}

{% block title %}Lista de Alumnos - SkyCode{% endblock %}

{% block content %}
<!-- Estilos personalizados para este formulario -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/alumno_style.css') }}">
<!-- Scripts -->
<script>
    var alumnosUrl = "{{ url_for('academic_bp.alumnos') }}";
</script>
<script src="{{ url_for('static', filename='JS/alumno_script.js') }}"></script>

<div class="container mt-4">
    <h1 class="mb-4">Lista de Alumnos</h1>

    <!-- Formulario para filtrar alumnos -->
    <form id="filterForm" method="get" action="{{ url_for('academic_bp.alumnos') }}" class="mb-4">
        <div class="row">
            <div class="col-md-3">
                <input type="text" name="matricula" class="form-control" placeholder="Matrícula" value="{{ request.args.get('matricula', '') }}">
            </div>
            <div class="col-md-3">
                <input type="text" name="nombre" class="form-control" placeholder="Primer Nombre" value="{{ request.args.get('nombre', '') }}">
            </div>
            <div class="col-md-3">
                <input type="text" name="apellido" class="form-control" placeholder="Apellido Paterno" value="{{ request.args.get('apellido', '') }}">
            </div>
            <div class="col-md-3">
                <input type="text" name="segundo_apellido" class="form-control" placeholder="Apellido Materno" value="{{ request.args.get('segundo_apellido', '') }}">
            </div>
        </div>
        <div class="mt-3">
            <button type="submit" class="btn btn-primary">Filtrar</button>
            <button type="button" class="btn btn-secondary" onclick="clearFilters()">Borrar filtros</button>
        </div>
    </form>

    <!-- Tabla de alumnos -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Matrícula</th>
                <th>Primer Nombre</th>
                <th>Apellido Paterno</th>
                <th>Apellido Materno</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.matricula }}</td>
                <td>{{ student.primer_nombre }}</td>
                <td>{{ student.primer_apellido }}</td>
                <td>{{ student.segundo_apellido }}</td>
                <td>
                    {# En este momento se comenta el enlace de modificar para evitar errores. #}
                    {# <a href="{{ url_for('academic_bp.modificar_alumno', matricula=student.matricula) }}" class="btn btn-warning">Modificar</a> #}
                    Modificar
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="text-center">No se encontraron alumnos.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
